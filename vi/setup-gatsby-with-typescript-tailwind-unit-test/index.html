<!DOCTYPE html><html lang="vi"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/next-blog/styles.696403ca8166ceb7a934.css" id="gatsby-global-css">@import url(https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap);.article{font-family:Montserrat}.article a,.article button,.article input{-webkit-tap-highlight-color:transparent}.article p{color:#292929;letter-spacing:-.003em;line-height:32px;font-size:21px;margin-top:2em;margin-bottom:-.46em}.article p:first-child{margin-top:1.1em}.article a{text-decoration:underline;color:inherit}.article h1{line-height:36px;margin-top:1.95em;font-size:30px;letter-spacing:0;margin-bottom:-.28em}.article h1,.article h2{color:#292929;font-weight:500}.article h2{margin-top:1em;font-size:26px;margin-bottom:-.36em}.article h4{color:#292929;font-size:22px;margin-bottom:-.26em;font-weight:500}.article pre{margin-top:.8em}.article ul{color:#292929;letter-spacing:-.003em;line-height:32px;font-size:21px;margin-top:1em;margin-bottom:-.46em}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.32.3"/><title data-react-helmet="true">Cách dựng một trang blog với GatsbyJS + Typescript + TailwindCSS | Hai Nguyen</title><meta data-react-helmet="true" name="description" content="Hai&#x27;s Personal Blog"/><meta data-react-helmet="true" name="keywords" content="Blog,React,Angular,Javascript,Typescript,Functional Programming"/><meta data-react-helmet="true" property="og:title" content="Cách dựng một trang blog với GatsbyJS + Typescript + TailwindCSS"/><meta data-react-helmet="true" property="og:type" content="website"/><link as="script" rel="preload" href="/next-blog/webpack-runtime-6ce45a7ec86322bce28b.js"/><link as="script" rel="preload" href="/next-blog/framework-8aba4025690a031b46dc.js"/><link as="script" rel="preload" href="/next-blog/styles-755093da0c07f4b49226.js"/><link as="script" rel="preload" href="/next-blog/app-68672042ae7cb9401002.js"/><link as="script" rel="preload" href="/next-blog/05d954cf-c6db298c906c9c30084e.js"/><link as="script" rel="preload" href="/next-blog/commons-518e58bf6a7d4015b30b.js"/><link as="script" rel="preload" href="/next-blog/022d3153bf09c36cd784dcdb36ffbd187f9c96d7-8695945ca61dfd864cb3.js"/><link as="script" rel="preload" href="/next-blog/component---src-templates-blog-post-tsx-66c6938f7d1532686151.js"/><link as="fetch" rel="preload" href="/next-blog/page-data/vi/setup-gatsby-with-typescript-tailwind-unit-test/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/next-blog/page-data/sq/d/4033596395.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/next-blog/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function setScript(initialValue) {
  var mql = window.matchMedia("(prefers-color-scheme: dark)");
  var systemPreference = mql.matches ? "dark" : "light";
  var persistedPreference;

  try {
    persistedPreference = localStorage.getItem("chakra-ui-color-mode");
  } catch (error) {
    console.log("Chakra UI: localStorage is not available. Color mode persistence might not work as expected");
  }

  var isInStorage = typeof persistedPreference === "string";
  var colorMode;

  if (isInStorage) {
    colorMode = persistedPreference;
  } else {
    colorMode = initialValue === "system" ? systemPreference : initialValue;
  }

  if (colorMode) {
    var root = document.documentElement;
    root.style.setProperty("--chakra-ui-color-mode", colorMode);
  }
})('light')</script><div id="___gatsby"><style data-emotion="css-global 1syi0wy">html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:system-ui,sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;touch-action:manipulation;}body{position:relative;min-height:100%;font-feature-settings:'kern';}*,*::before,*::after{border-width:0;border-style:solid;box-sizing:border-box;}main{display:block;}hr{border-top-width:1px;box-sizing:content-box;height:0;overflow:visible;}pre,code,kbd,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:1em;}a{background-color:transparent;color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit;}abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;}b,strong{font-weight:bold;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}img{border-style:none;}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{vertical-align:baseline;}textarea{overflow:auto;}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{-webkit-appearance:none!important;}input[type="number"]{-moz-appearance:textfield;}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}[type="search"]::-webkit-search-decoration{-webkit-appearance:none!important;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details{display:block;}summary{display:-webkit-box;display:-webkit-list-item;display:-ms-list-itembox;display:list-item;}template{display:none;}[hidden]{display:none!important;}body,blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0;}button{background:transparent;padding:0;}fieldset{margin:0;padding:0;}ol,ul{margin:0;padding:0;}textarea{resize:vertical;}button,[role="button"]{cursor:pointer;}button::-moz-focus-inner{border:0!important;}table{border-collapse:collapse;}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit;}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle;}img,video{max-width:100%;height:auto;}[data-js-focus-visible] :focus:not([data-focus-visible-added]){outline:none;box-shadow:none;}select::-ms-expand{display:none;}</style><style data-emotion="css-global 1rxzalh">body{font-family:Montserrat;color:#1A202C;background:#FFFFFF;-webkit-transition:background-color 0.2s;transition:background-color 0.2s;line-height:1.5;}*::-webkit-input-placeholder{color:#A0AEC0;}*::-moz-placeholder{color:#A0AEC0;}*:-ms-input-placeholder{color:#A0AEC0;}*::placeholder{color:#A0AEC0;}*,*::before,::after{border-color:#E2E8F0;word-wrap:break-word;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css ldo4d5">.css-ldo4d5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;width:100%;}</style><div class="css-ldo4d5"><style data-emotion="css 1elhtw7">.css-1elhtw7{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding-left:2rem;padding-right:2rem;padding-top:6rem;padding-bottom:6rem;width:100%;max-width:56rem;}.css-1elhtw7>*:not(style)~*:not(style){margin-top:0.5rem;-webkit-margin-start:0;margin-inline-start:0;}</style><div class="chakra-stack css-1elhtw7"><style data-emotion="css esc6ow">.css-esc6ow{width:100%;text-align:center;font-size:3.75rem;font-weight:700;margin-bottom:2rem;color:#2D3748;}</style><p class="chakra-text css-esc6ow">Cách dựng một trang blog với GatsbyJS + Typescript + TailwindCSS</p><style data-emotion="css 1lg3zhh">.css-1lg3zhh{width:150%;margin-top:2rem;margin-bottom:2rem;max-width:1200px;}</style><div class="css-1lg3zhh"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:50%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABmUlEQVQoz32SS0sCURTH7+epKKJc9AnqI0Qbo5cR2K5dRG1bTpmlUZkuKiEbqaGs7OFrLHNsQh0dUygjCzRLLO88uzNjUEgeLofDvfzP+fG/Bxi6V0Y6lyd6Vj3226tDliTSnx9QlmVJkpsEBwXKmwMGnUXfurg+46XOcpe7iadMUVX+K9Ve7umCf48Bg22muX5n5DgTwJl46EGTofRTSL8baXXxuRJwM2GCBQj42EFfH2UU4ArkIP+SfxMFRSOKYuNkHgrR02xoPxV0M2Bj9hzR+1x1YM92ZHpg7QKnUyxDRSlWDZIkC4UChFAD9rmSUW8WMxKAVHvEg3Vgz05k3rjlc9NR6sZm2zSbzU6nE8Mwq9UKuVr5tRrAkzcnWddCeLRzGYQO0gi4+lHTqCrlz1TsEX7xiJnnlYyaoqJUKgmcqAKng+7UVK99qH0J+PeSebbY+Dd/fVJy9g4BJ2JnOWyS0LeYxnUWoDr8WyRLotT4N4rDOIMmuxbDwx3msa4VdED1vdZsJdR7nkMroTiMMKf6HAjY0G1B4m/2qf1XjUWRzQAAAABJRU5ErkJggg==" alt="featured-image" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/next-blog/static/35e7cf2fa052510072e95a9d133e49a4/5ca18/gatsby-featured.png 270w,
/next-blog/static/35e7cf2fa052510072e95a9d133e49a4/13528/gatsby-featured.png 540w,
/next-blog/static/35e7cf2fa052510072e95a9d133e49a4/05d05/gatsby-featured.png 1080w,
/next-blog/static/35e7cf2fa052510072e95a9d133e49a4/0dadc/gatsby-featured.png 1500w" sizes="(max-width: 1080px) 100vw, 1080px" /><img loading="lazy" sizes="(max-width: 1080px) 100vw, 1080px" srcset="/next-blog/static/35e7cf2fa052510072e95a9d133e49a4/5ca18/gatsby-featured.png 270w,
/next-blog/static/35e7cf2fa052510072e95a9d133e49a4/13528/gatsby-featured.png 540w,
/next-blog/static/35e7cf2fa052510072e95a9d133e49a4/05d05/gatsby-featured.png 1080w,
/next-blog/static/35e7cf2fa052510072e95a9d133e49a4/0dadc/gatsby-featured.png 1500w" src="/next-blog/static/35e7cf2fa052510072e95a9d133e49a4/05d05/gatsby-featured.png" alt="featured-image" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><style data-emotion="css 9yfthd">.css-9yfthd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;width:100%;}.css-9yfthd>*:not(style)~*:not(style){-webkit-margin-start:0.5rem;margin-inline-start:0.5rem;margin-top:0;}</style><div class="chakra-stack css-9yfthd"><style data-emotion="css 167hdm8">.css-167hdm8{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:fixed;top:3rem;left:calc((100vw - 1200px) / 2 + .5rem);width:calc((1200px - 896px) / 2 - 16px);}</style><div class="css-167hdm8"><style data-emotion="css 1t8mbiy">.css-1t8mbiy{color:#97266D;margin-bottom:1rem;font-size:1.125rem;font-weight:600;}</style><p class="chakra-text css-1t8mbiy">Hai Nguyen&#x27;s Blog</p><style data-emotion="css lytb1o">.css-lytb1o{font-size:0.875rem;margin-bottom:0.5rem;color:#1A202C;}</style><p class="chakra-text css-lytb1o">Get better on coding, cooking and gamming everyday.</p><style data-emotion="css svjswr">.css-svjswr{opacity:0.6;border:0;border-color:inherit;border-style:solid;border-bottom-width:1px;width:100%;}</style><hr role="separator" aria-orientation="horizontal" class="chakra-divider css-svjswr"/><style data-emotion="css 7obav3">.css-7obav3{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-transition:all 250ms;transition:all 250ms;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:none;width:auto;line-height:1.2;border-radius:0.375rem;font-weight:600;height:2.5rem;min-width:2.5rem;font-size:1rem;padding-left:1rem;padding-right:1rem;background:#EDF2F7;margin-top:1rem;}.css-7obav3:focus,.css-7obav3[data-focus]{box-shadow:0 0 0 3px rgba(66, 153, 225, 0.6);}.css-7obav3[disabled],.css-7obav3[disabled]:focus,.css-7obav3[disabled]:hover,.css-7obav3[aria-disabled=true],.css-7obav3[aria-disabled=true]:focus,.css-7obav3[aria-disabled=true]:hover,.css-7obav3[data-disabled],.css-7obav3[data-disabled]:focus,.css-7obav3[data-disabled]:hover{opacity:0.4;cursor:not-allowed;box-shadow:none;}.css-7obav3:hover,.css-7obav3[data-hover]{background:#E2E8F0;}.css-7obav3:hover[disabled],.css-7obav3[data-hover][disabled],.css-7obav3:hover[disabled]:focus,.css-7obav3[data-hover][disabled]:focus,.css-7obav3:hover[disabled]:hover,.css-7obav3[data-hover][disabled]:hover,.css-7obav3:hover[aria-disabled=true],.css-7obav3[data-hover][aria-disabled=true],.css-7obav3:hover[aria-disabled=true]:focus,.css-7obav3[data-hover][aria-disabled=true]:focus,.css-7obav3:hover[aria-disabled=true]:hover,.css-7obav3[data-hover][aria-disabled=true]:hover,.css-7obav3:hover[data-disabled],.css-7obav3[data-hover][data-disabled],.css-7obav3:hover[data-disabled]:focus,.css-7obav3[data-hover][data-disabled]:focus,.css-7obav3:hover[data-disabled]:hover,.css-7obav3[data-hover][data-disabled]:hover{background:#EDF2F7;}.css-7obav3:active,.css-7obav3[data-active]{background:#CBD5E0;}</style><a class="chakra-button css-7obav3" href="/next-blog/vi/">Back</a></div><style data-emotion="css 17jpevf">.css-17jpevf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-right:3rem;}</style><div class="css-17jpevf"><style data-emotion="css 9at4gq">.css-9at4gq{border-radius:9999px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;text-align:center;text-transform:uppercase;font-weight:500;position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;background:#A0AEC0;color:#1A202C;border-color:#FFFFFF;vertical-align:top;width:3rem;height:3rem;font-size:calc(3rem / 2.5);margin-right:1rem;}</style><span class="chakra-avatar css-9at4gq"><style data-emotion="css 16ite8i">.css-16ite8i{color:#fff;width:100%;height:100%;}</style><svg viewBox="0 0 128 128" role="img" class="css-16ite8i"><path fill="currentColor" d="M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z"></path><path fill="currentColor" d="M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24"></path></svg></span><style data-emotion="css 1ei42wq">.css-1ei42wq{color:#2D3748;margin-right:0.25rem;font-size:1.25rem;}</style><p class="chakra-text css-1ei42wq">by</p><style data-emotion="css 1rm39z5">.css-1rm39z5{font-size:1.25rem;color:#2D3748;-webkit-text-decoration:underline;text-decoration:underline;}</style><a class="chakra-text css-1rm39z5" href="https://github.con/dinhhai281">Hai Nguyen</a></div><style data-emotion="css 70qvj9">.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-70qvj9"><style data-emotion="css 1b30jsj">.css-1b30jsj{width:1.5rem;height:1.5rem;display:inline-block;line-height:1em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:#2D3748;vertical-align:middle;margin-right:1rem;}</style><svg viewBox="0 0 14 14" focusable="false" class="chakra-icon css-1b30jsj"><path fill="currentColor" d="M10.8889,5.5 L3.11111,5.5 L3.11111,7.05556 L10.8889,7.05556 L10.8889,5.5 Z M12.4444,1.05556 L11.6667,1.05556 L11.6667,0 L10.1111,0 L10.1111,1.05556 L3.88889,1.05556 L3.88889,0 L2.33333,0 L2.33333,1.05556 L1.55556,1.05556 C0.692222,1.05556 0.00777777,1.75556 0.00777777,2.61111 L0,12.5 C0,13.3556 0.692222,14 1.55556,14 L12.4444,14 C13.3,14 14,13.3556 14,12.5 L14,2.61111 C14,1.75556 13.3,1.05556 12.4444,1.05556 Z M12.4444,12.5 L1.55556,12.5 L1.55556,3.94444 L12.4444,3.94444 L12.4444,12.5 Z M8.55556,8.61111 L3.11111,8.61111 L3.11111,10.1667 L8.55556,10.1667 L8.55556,8.61111 Z"></path></svg><style data-emotion="css zbloxw">.css-zbloxw{font-size:1.25rem;color:#2D3748;}</style><p class="chakra-text css-zbloxw">25 July, 2020</p></div></div><style data-emotion="css 8atqhb">.css-8atqhb{width:100%;}</style><div class="article css-8atqhb" data-testid="post-content"><p><em>GatsbyJS</em> là một framework dựa trên ReactJS vàn GraphQL, phù hợp để xây dựng những ứng dụng web một cách nhanh cùng với hiệu năng vượt trội. Bài viết này sẽ nói về cách mình setup một project <code class="language-text">GatsbyJS</code>. Cụ thể là một template <code class="language-text">GatsbyJS</code> sử dụng <code class="language-text">Typescript</code>, <code class="language-text">TailwindCSS (PostCSS)</code> và <code class="language-text">Unit Testing</code>.</p>
<h4>Cài đặt những thứ cần thiết</h4>
<p>Trước khi bắt đầu bạn cần cài đặt</p>
<ul>
<li>Node.js</li>
<li>Git</li>
<li>Gatsby CLI</li>
</ul>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> i -g gatsby-cli</code></pre></div>
<h4>Dùng Gatsby CLI để tạo 1 project GatsbyJS</h4>
<p>Với Gatsby CLI, chỉ cần một câu lệnh là công việc này sẽ hoàn thành.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">gatsby new gatsby-typescript-tailwindcss https://github.com/gatsbyjs/gatsby-starter-hello-world</code></pre></div>
<p>Với câu lệnh trên, bạn sẽ tạo ra một thư mục <code class="language-text">gatsby-typescript-tailwindcss</code> với <code class="language-text">gatsby-starter-hello-world</code> template. Gatsby có rất nhiều template được cộng đồng xây dựng bạn có thể tìm kiếm ở <a href="https://www.gatsbyjs.org/starters/?v=2">đây</a>.</p>
<p>Mình cũng có tạo 1 template là thành quả của bài viết này nếu muốn dùng mà không muốn đọc hết thì tìm trong github của mình nhé 😘.</p>
<p>Quay lại, sử dụng <code class="language-text">gatsby-starter-hello-world</code> bạn sẽ có một project gatsby không có bất kỳ plugin nào. Vì mục đích là để làm blog nên sau này chỉ thêm những plugin cần thiết cho việc đó thôi. Trên trang chủ của GatsbyJS bạn cũng có thể tìm được một cái template starter dùng cho viết blog đó 😋.</p>
<h4>Setup Typescript</h4>
<p>GatsbyJS hiện tại có hỗ trợ phần nào cho Typescript, chỉ cần đổi extension của file từ <code class="language-text">.js</code> sang <code class="language-text">.tsx</code> là được. Tuy nhiên với những file như <code class="language-text">gatsby-config.js</code>, <code class="language-text">gatsby-brower.js</code>, <code class="language-text">gatsby-node.js</code> thì không dùng Typescirpt được nhé.</p>
<p>Nhớ tạo file <code class="language-text">tsconfig.json nhé</code></p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"CommonJS"</span><span class="token punctuation">,</span>
    <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"ESNext"</span><span class="token punctuation">,</span>
    <span class="token property">"lib"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"DOM"</span><span class="token punctuation">,</span> <span class="token string">"ESNext"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"jsx"</span><span class="token operator">:</span> <span class="token string">"preserve"</span><span class="token punctuation">,</span>
    <span class="token property">"esModuleInterop"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"strict"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"noEmit"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"noUnusedLocals"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"exclude"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"node_modules"</span><span class="token punctuation">,</span>
    <span class="token string">"public"</span><span class="token punctuation">,</span>
    <span class="token string">".cache"</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Mình thì có dùng Alias Import của Typescript nên cần phải cài thêm <code class="language-text">tsconfig-paths-webpack-plugin</code></p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> i -D tsconfig-paths-webpack-plugin</code></pre></div>
<p>Sau đó, thêm vào update lại file gatsby-node.js</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> TsConfigPathsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'tsconfig-paths-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span><span class="token function-variable function">onCreateWebpackConfig</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> actions <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  actions<span class="token punctuation">.</span><span class="token function">setWebpackConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
      plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">TsConfigPathsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>Bây giờ update lại file <code class="language-text">tsconfig.json</code> để thêm alias, trong trường hợp của mình thì thêm 2 cái này</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"CommonJS"</span><span class="token punctuation">,</span>
    <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"ESNext"</span><span class="token punctuation">,</span>
    <span class="token property">"lib"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"DOM"</span><span class="token punctuation">,</span> <span class="token string">"ESNext"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"jsx"</span><span class="token operator">:</span> <span class="token string">"preserve"</span><span class="token punctuation">,</span>
    <span class="token property">"esModuleInterop"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"strict"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"noEmit"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"noUnusedLocals"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// Thêm @components/* và @utils/*</span>
    <span class="token property">"baseUrl"</span><span class="token operator">:</span> <span class="token string">"src"</span><span class="token punctuation">,</span>
    <span class="token property">"paths"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"@utils/*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"./utils/*"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"@components/*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"./components/*"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"exclude"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"node_modules"</span><span class="token punctuation">,</span>
    <span class="token string">"public"</span><span class="token punctuation">,</span>
    <span class="token string">".cache"</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Sau khi thêm xong thì thay vì</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">'../../../components/layout.tsx'</span><span class="token punctuation">;</span></code></pre></div>
<p>thì ở bất cứ thư mục nào chỉ cần</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">'@components/layout.tsx'</span><span class="token punctuation">;</span></code></pre></div>
<br>
<h4>Setup TailwindCSS</h4>
<p><code class="language-text">TailwindCSS</code> là một CSS framework mà mình khá thích và dạo gần đây cũng thích style Atomic CSS. Nếu bạn không thích thì có thể dùng <code class="language-text">styled-component</code>/<code class="language-text">emotion</code> hay SASS tuỳ thích nhé.</p>
<p>Để setup <code class="language-text">TailwindCSS</code> thì đầu tiên bạn phải cài PostCSS. Gatsby có sẵn <code class="language-text">gatsby-plugin-postcss</code> luôn.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> i tailwindcss gatsby-plugin-postcss cssnano autoprefixer postcss-import</code></pre></div>
<p>Giải thích một chút về những thứ bạn vừa cài:</p>
<ul>
<li><code class="language-text">cssnano</code> là một plugin của <code class="language-text">postcss</code> dùng để minified css giúp cho bundle size của bạn nhỏ hơn, đối với việc build ra static file như GatsbyJS thì bundle càng nhỏ càng tốt đúng không 😉</li>
<li><code class="language-text">autoprefixer</code> là một plugin của <code class="language-text">postcss</code> sẽ tự động thêm các prefix để code css của bạn chạy được trên các browser khác nhau.</li>
<li><code class="language-text">postcss-import</code> là một plugin của <code class="language-text">postcss</code> hỗ trợ syntax <code class="language-text">@import</code>.</li>
<li><code class="language-text">tailwindcss</code> nhân vật chính, thật ra nó cũng là 1 plugin của <code class="language-text">postcss</code> 😬.</li>
</ul>
<p>Đầu tiên thêm mở file <code class="language-text">gatsby-config.js</code> lên thêm plugin postcss vô.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'gatsby-plugin-postcss'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Bây giờ tạo file <code class="language-text">tailwind.config.js</code> với nội dung như sau:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  purge<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'./src/**/*.tsx'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  theme<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  variants<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>Cơ bản thế này là đủ. Tuy nhiên để biết cụ thể bạn có thể làm gì trong file config này thì nên đọc document của TailwindCSS nhé. Ở đây mình có config để dùng <code class="language-text">PurgeCSS</code> trên những file <code class="language-text">.tsx</code>, việc này sẽ loại bỏ những utility class bạn không sử dụng ra khỏi bundle giúp nó nhỏ hơn.</p>
<p>Cuối cùng tạo file <code class="language-text">postcss.config.js</code> nữa là xong cho TailwindCSS</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> tailwindConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./tailwind.config'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-import'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'tailwindcss'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>tailwindConfig<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-nested'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cssnano'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Về cơ bản là file này để gắn mấy cái plugin của <code class="language-text">PostCSS</code> thôi. Giờ thì bạn đã sẵn sàng để sử dụng TailwindCSS rồi đó. Để bắt đầu thì hãy tạo file <code class="language-text">src/css/style.css</code> với nội dung sau:</p>
<div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@import</span> <span class="token string">'tailwindcss/base'</span><span class="token punctuation">;</span></span>
<span class="token atrule"><span class="token rule">@import</span> <span class="token string">'tailwindcss/components'</span><span class="token punctuation">;</span></span>
<span class="token atrule"><span class="token rule">@import</span> <span class="token string">'tailwindcss/utilities'</span><span class="token punctuation">;</span></span></code></pre></div>
<p>Sau đó trong file <code class="language-text">gatsby-browser.js</code></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token string">'./src/css/style.css'</span><span class="token punctuation">;</span></code></pre></div>
<h4>Setup ESLint</h4>
<p>Hiện tại TSLint đã bị deprecated nên mình sẽ dùng ESLint cho hợp thời nhé. Đầu tiên là cài những package sau:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> i -D eslint eslint-config-prettier eslint-plugin-prettier eslint-plugin-react @typescript-eslint/eslint-plugin @typescript-eslint/parser prettier</code></pre></div>
<p>Tạo file <code class="language-text">.eslintrc</code></p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"parser"</span><span class="token operator">:</span> <span class="token string">"@typescript-eslint/parser"</span><span class="token punctuation">,</span>
  <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"eslint:recommended"</span><span class="token punctuation">,</span>
    <span class="token string">"plugin:react/recommended"</span><span class="token punctuation">,</span>
    <span class="token string">"plugin:@typescript-eslint/recommended"</span><span class="token punctuation">,</span>
    <span class="token string">"prettier/@typescript-eslint"</span><span class="token punctuation">,</span>
    <span class="token string">"plugin:prettier/recommended"</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"settings"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"react"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"detect"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"env"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"browser"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"node"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"es6"</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"plugins"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"@typescript-eslint"</span><span class="token punctuation">,</span>
    <span class="token string">"react"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"parserOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"ecmaFeatures"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"jsx"</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"ecmaVersion"</span><span class="token operator">:</span> <span class="token number">2020</span><span class="token punctuation">,</span>
    <span class="token property">"sourceType"</span><span class="token operator">:</span> <span class="token string">"module"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"rules"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"react/prop-types"</span><span class="token operator">:</span> <span class="token string">"off"</span><span class="token punctuation">,</span>
    <span class="token property">"@typescript-eslint/explicit-function-return-type"</span><span class="token operator">:</span> <span class="token string">"off"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"overrides"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"files"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"*.ts"</span><span class="token punctuation">,</span>
        <span class="token string">"*.js"</span><span class="token punctuation">,</span>
        <span class="token string">"*.tsx"</span><span class="token punctuation">,</span>
        <span class="token string">"*.jsx"</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"rules"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"@typescript-eslint/no-var-requires"</span><span class="token operator">:</span> <span class="token string">"off"</span><span class="token punctuation">,</span>
        <span class="token property">"@typescript-eslint/explicit-module-boundary-types"</span><span class="token operator">:</span> <span class="token string">"off"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span> </code></pre></div>
<p>Tạo file <code class="language-text">.prettierrc</code></p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"arrowParens"</span><span class="token operator">:</span> <span class="token string">"avoid"</span><span class="token punctuation">,</span>
  <span class="token property">"semi"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"singleQuote"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"jsxSingleQuote"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"bracketSpacing"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"trailingComma"</span><span class="token operator">:</span> <span class="token string">"es5"</span><span class="token punctuation">,</span>
  <span class="token property">"printWidth"</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
  <span class="token property">"endOfLine"</span><span class="token operator">:</span> <span class="token string">"lf"</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Nếu muốn tự dộng fix lint khi save file thì hãy tạo file <code class="language-text">.vscode/settings.json</code></p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"editor.codeActionsOnSave"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"source.fixAll.eslint"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h4>Cuối cùng là Unit Test</h4>
<p>Thật ra để làm blog thì phần này không cần thiết đâu, nhưng mà mục đích của cái template này có thể làm gì cũng được nên mình sẽ thêm phần setup unit test nữa.</p>
<p>Ở đây mình sẽ dùng <code class="language-text">Jest</code> và <code class="language-text">@testing-library/react</code>. Đầu tiên là cài đặt một số thứ:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> i -D @babel/preset-typescript @testing-library/react jest @types/jest babel-jest identity-obj-proxy</code></pre></div>
<p>File <code class="language-text">jest-preprocess.js</code></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> babelOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'babel-preset-gatsby'</span><span class="token punctuation">,</span> <span class="token string">'@babel/preset-typescript'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'babel-jest'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createTransformer</span><span class="token punctuation">(</span>babelOptions<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>File <code class="language-text">loadershim.js</code></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">global<span class="token punctuation">.</span>___loader <span class="token operator">=</span> <span class="token punctuation">{</span>
  enqueue<span class="token operator">:</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>File <code class="language-text">jest.config.js</code></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  transform<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'^.+\\.[jt]sx?$'</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;rootDir>/jest-preprocess.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  moduleNameMapper<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'.+\\.(css|styl|less|sass|scss)$'</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">identity-obj-proxy</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token string">'.+\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$'</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;rootDir>/__mocks__/file-mock.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token string">'@utils/(.*)'</span><span class="token operator">:</span> <span class="token string">'&lt;rootDir>/src/utils/$1'</span><span class="token punctuation">,</span>
    <span class="token string">'@components/(.*)'</span><span class="token operator">:</span> <span class="token string">'&lt;rootDir>/src/components/$1'</span><span class="token punctuation">,</span>
    <span class="token string">'@pages/(.*)'</span><span class="token operator">:</span> <span class="token string">'&lt;rootDir>/src/pages/$1'</span><span class="token punctuation">,</span>
    <span class="token string">'@templates/(.*)'</span><span class="token operator">:</span> <span class="token string">'&lt;rootDir>/src/templates/$1'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  testPathIgnorePatterns<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">node_modules</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">\\.cache</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;rootDir>.*/public</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  transformIgnorePatterns<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">node_modules/(?!(gatsby)/)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  globals<span class="token operator">:</span> <span class="token punctuation">{</span>
    __PATH_PREFIX__<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    __BASE_PATH__<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  testURL<span class="token operator">:</span> <span class="token string">'http://localhost'</span><span class="token punctuation">,</span>
  moduleDirectories<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'node_modules'</span><span class="token punctuation">,</span> <span class="token string">'__dirname'</span><span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  setupFiles<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;rootDir>/loadershim.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>Trong file trên thì mình sẽ dùng package <code class="language-text">identity-obj-proxy</code> để mock các file css, scss... File binary thì <code class="language-text">__mocks__/file-mock.js</code></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token string">'test-file-stub'</span><span class="token punctuation">;</span> </code></pre></div>
<p>Mock thêm Gatsby nữa <code class="language-text">__mocks__/gatsby.ts</code></p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> gastby <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">requireActual</span><span class="token punctuation">(</span><span class="token string">'gatsby'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">module</span><span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>gastby<span class="token punctuation">,</span>
  graphql<span class="token operator">:</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Link<span class="token operator">:</span> jest
    <span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">mockImplementation</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token punctuation">{</span> activeClassName<span class="token punctuation">,</span> activeStyle<span class="token punctuation">,</span> getProps<span class="token punctuation">,</span> innerRef<span class="token punctuation">,</span> partiallyActive<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> replace<span class="token punctuation">,</span> to<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span>
        React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span>rest<span class="token punctuation">,</span> href<span class="token operator">:</span> to <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
  StaticQuery<span class="token operator">:</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  useStaticQuery<span class="token operator">:</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<h4>Lúc làm thì mò lâu lắm, viết lại có thể sẽ có chút sai sót bữa nào rảnh sẽ test lại cái bài viết này 😵</h4></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/vi/setup-gatsby-with-typescript-tailwind-unit-test";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-64742d1bff844b746df5.js"],"app":["/app-68672042ae7cb9401002.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-6f03b54c21f26745ac29.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-7cd95f1abbd1d5a4844a.js"],"component---src-templates-blog-post-tsx":["/component---src-templates-blog-post-tsx-66c6938f7d1532686151.js"]};/*]]>*/</script><script src="/next-blog/polyfill-64742d1bff844b746df5.js" nomodule=""></script><script src="/next-blog/component---src-templates-blog-post-tsx-66c6938f7d1532686151.js" async=""></script><script src="/next-blog/022d3153bf09c36cd784dcdb36ffbd187f9c96d7-8695945ca61dfd864cb3.js" async=""></script><script src="/next-blog/commons-518e58bf6a7d4015b30b.js" async=""></script><script src="/next-blog/05d954cf-c6db298c906c9c30084e.js" async=""></script><script src="/next-blog/app-68672042ae7cb9401002.js" async=""></script><script src="/next-blog/styles-755093da0c07f4b49226.js" async=""></script><script src="/next-blog/framework-8aba4025690a031b46dc.js" async=""></script><script src="/next-blog/webpack-runtime-6ce45a7ec86322bce28b.js" async=""></script></body></html>