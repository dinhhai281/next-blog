{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/first-class-observable-angular","result":{"data":{"allGithubData":{"nodes":[{"data":{"viewer":{"avatarUrl":"https://avatars.githubusercontent.com/u/19237948?u=05c87da55840481725a97a153f1380f2acf98dea&v=4","email":"dinhhai281@gmail.com","name":"Hai Nguyen","login":"dinhhai281"}}}]},"markdownRemark":{"html":"<p>Reactive eXtensions for JavaScript lÃ  vÅ© khÃ­ tá»‘i thÆ°á»£ng vá»›i báº¥t ká»³ ai code JavaScript Ä‘áº·c biá»‡t lÃ  nhá»¯ng ai Ä‘au khá»• vá»›i Angular nhÆ° mÃ¬nh. Trong nhá»¯ng ngÃ y thÃ¡ng Ä‘Ã³ thÃ¬ mÃ¬nh cÅ©ng tÃ¬m ra má»™t cÃ¡ch Ä‘á»ƒ enjoy Angular Ä‘Ã³ lÃ  dÃ¹ng RxJS cho má»i thá»© biáº¿n báº£n thÃ¢n thÃ nh má»™t Pure Reactive Programmer. BÃ i viáº¿t nÃ y sáº½ viáº¿t vá» cÃ¡ch mÃ¬nh sá»­ dá»¥ng rxjs cho pháº§n lá»›n cÃ¡c trÆ°á»ng há»£p thÆ°á»ng gáº·p pháº£i khi lÃ m viá»‡c vá»›i Angular, cÃ¡i mÃ  mÃ¬nh tá»± gá»i lÃ  <code class=\"language-text\">First Class Observable Pattern</code>.</p>\n<p>âš ï¸ <strong>Má»™t sá»‘ thuáº­t ngá»¯ dÃ¹ng trong nÃ y Ä‘á»u khÃ´ng chÃ­nh thá»©c vÃ  cÃ³ thá»ƒ khÃ´ng chÃ­nh xÃ¡c vá» máº·t há»c thuáº­t.</strong></p>\n<p>Ã tÆ°á»Ÿng chÃ­nh á»Ÿ Ä‘Ã¢y lÃ  dÃ¹ng <code class=\"language-text\">Observable</code> cho táº¥t cáº£ má»i thá»©. Dá»¯ liá»‡u, event, side effect,... táº¥t cáº£ Ä‘á»u Ä‘Æ°á»£c thá»ƒ hiá»‡n dÆ°á»›i dáº¡ng <code class=\"language-text\">Observable</code>. Má»¥c Ä‘Ã­ch cá»§a viá»‡c nÃ y lÃ  táº¥t cáº£ má»i thá»© Ä‘á»u lÃ  stream thÃ¬ cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c operator cá»§a <code class=\"language-text\">RxJS</code> Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c logic trong code. Äiá»u nÃ y ráº¥t cáº§n thiáº¿t khi cáº§n lÃ m nhá»¯ng thá»© nhÆ° lÃ  input vÃ  má»™t input thÃ¬ giÃ¡ trá»‹ á»Ÿ input khÃ¡c cÅ©ng pháº£i Ä‘á»•i theo vÃ  cÃ³ thá»ƒ trong Ä‘Ã³ cÃ²n vÃ i yáº¿u tá»‘ khÃ¡c áº£nh hÆ°á»Ÿng tá»›i luá»“ng thay Ä‘á»•i Ä‘Ã³.</p>\n<h4>Observable - VÅ© khÃ­ tá»‘i thÆ°á»£ng</h4>\n<p>VÃ­ dá»¥ báº¡n cÃ³ cÃ³ 2 biáº¿n <code class=\"language-text\">x</code> vÃ  <code class=\"language-text\">y</code> lÃ  <code class=\"language-text\">number</code>. Náº¿u báº¡n muá»‘n <code class=\"language-text\">z</code> = <code class=\"language-text\">x</code> + <code class=\"language-text\">y</code> thÃ¬ báº¡n sáº½ lÃ m nhÆ° tháº¿ nÃ o?</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> y <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> z <span class=\"token operator\">=</span> x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Náº¿u báº¡n lÃ m giá»‘ng nhÆ° Ä‘oáº¡n code trÃªn thÃ¬ cÃ³ thá»ƒ nÃ³i lÃ  báº¡n vá»«a Ä‘Ãºng vá»«a sai. Báº¡n Ä‘Ãºng vÃ¬ táº¡i thá»i Ä‘iá»ƒm phÃ©p gÃ¡n Ä‘Æ°á»£c thá»±c hiá»‡n nhÆ°ng náº¿u sau Ä‘Ã³ báº¡n gÃ¡n <code class=\"language-text\">x = 1</code> thÃ¬ sao? Báº¡n tháº¥y Ä‘Ã³ náº¿u giÃ¡ trá»‹ cá»§a <code class=\"language-text\">x</code> thay Ä‘á»•i thÃ¬ ngay láº­p tá»©c <code class=\"language-text\">z</code> Ä‘Ã£ khÃ´ng cÃ²n báº±ng <code class=\"language-text\">x + y</code>. Báº¡n sáº½ cáº§n pháº£i láº·p láº¡i dÃ²ng code <code class=\"language-text\">let z = x + y</code>.</p>\n<p>Äá»ƒ cháº¯c cháº¯n <code class=\"language-text\">z</code> luÃ´n luÃ´n báº±ng <code class=\"language-text\">x + y</code> thÃ¬ hÃ£y tÆ°á»Ÿng tÆ°á»£ng <code class=\"language-text\">x</code> vÃ  <code class=\"language-text\">y</code> lÃ  cÃ¡c stream <code class=\"language-text\">number</code> giÃ¡ trá»‹ cá»§a chÃºng sáº½ thay Ä‘á»•i theo thá»i gian, cÃ²n <code class=\"language-text\">z</code> lÃ  má»™t stream tá»•ng cá»§a <code class=\"language-text\">x</code> vÃ  <code class=\"language-text\">y</code> (giÃ¡ trá»‹ cá»§a z sáº½ lÃ  tá»•ng cá»§a x vÃ  y táº¡i thá»i Ä‘iá»ƒm t). Äiá»u nÃ y cÃ³ nghia lÃ  má»—i khi x hoáº·c y thay Ä‘á»•i giÃ¡ trá»‹ thÃ¬ giÃ¡ trá»‹ cá»§a z sáº½ Ä‘Æ°á»£c tÃ­nh láº¡i.</p>\n<p>Hy vá»ng báº¡n hiá»ƒu váº¥n Ä‘á» trÃªn, Ä‘Ã³ lÃ  Ã½ tÆ°á»Ÿng cá»§a <code class=\"language-text\">Reactive Programming</code>. Váº­y Ä‘á»ƒ lÃ m viá»‡c trÃªn thay vÃ¬ biá»ƒu diá»ƒn x vÃ  y lÃ  2 <code class=\"language-text\">number</code> vÃ  gÃ¡n <code class=\"language-text\">z</code> báº±ng <code class=\"language-text\">x + y</code> á»Ÿ má»™t dÃ²ng code nÃ o Ä‘Ã³ thÃ¬ hÃ£y cÃ¢n nháº¯c lÃ m nhÆ° tháº¿ nÃ y.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> x$ <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BehaviorSubject<span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> y$ <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BehaviorSubject<span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> z$ <span class=\"token operator\">=</span> <span class=\"token function\">combineLatest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>x$<span class=\"token punctuation\">,</span> y$<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Náº¿u muá»‘n thay Ä‘á»•i giÃ¡ trá»‹ cá»§a x vÃ  y</span>\nx$<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ny$<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Tá»›i Ä‘Ã¢y cÃ³ thá»ƒ nhiá»u ngÆ°á»i sáº½ nghÄ© ráº±ng viá»‡c trÃªn chá»‰ lÃ  phá»©c táº¡p hoÃ¡ má»i thá»©, tháº­t ra cÅ©ng Ä‘Ãºng nhÆ°ng mÃ  Ä‘Ã´i khi pháº£i cháº¥p nháº­n Ä‘Ã¡nh Ä‘á»•i cÃ¡i nÃ y Ä‘á»ƒ cÃ³ Ä‘Æ°á»£c cÃ¡i khÃ¡c thÃ´i. HÃ£y tÆ°á»Ÿng tÆ°á»£ng <code class=\"language-text\">Observable</code> lÃ  má»™t cÃ¡i há»™p Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ dá»… dÃ ng sáº¯p xáº¿p vÃ  di chuyá»ƒn, náº¿u báº¡n bá» háº¿t táº¥t cáº£ Ä‘á»“ Ä‘áº¡c trong nhÃ  vÃ´ Ä‘Ã³ thÃ¬ má»i thá»© trá»ng nhÃ  báº¡n Ä‘á»u cÃ³ thá»ƒ Ä‘Æ°á»£c sáº¯p xáº¿p gá»n gÃ ng, báº¡n sáº½ lÃ m Ä‘Æ°á»£c Ä‘Æ°á»£c nhá»¯ng viá»‡c mÃ  trÆ°á»›c Ä‘Ã³ khÃ´ng thá»ƒ nÃ o lÃ m Ä‘Æ°á»£c cháº³ng háº¡n nhÆ° Ä‘áº·t má»™t cÃ¡i bÃ n phÃ­m náº±m trÃªn má»™t cÃ¢y bÃºt ğŸ¤”. Thay vÃ¬ báº¥t kháº£ thi thÃ¬ bÃ¢y giá» chá»‰ cáº§n bá» má»i thá»© vÃ´ há»™p lÃ  Ä‘Æ°á»£c.</p>\n<p>NhÆ°ng mÃ  khÃ³ khÄƒn má»™t cÃ¡i lÃ  bÃ¢y giá» muá»‘n dÃ¹ng cÃ¡i gÃ¬ thÃ¬ trÆ°á»›c háº¿t báº¡n pháº£i láº¥y cÃ¡i há»™p Ä‘á»±ng Ä‘á»“ váº­t Ä‘Ã³ rá»“i má»Ÿ há»™p ra.</p>\n<p><em>Tháº­t ra mÃ¬nh cÅ©ng muá»‘n giáº£i thÃ­ch cÃ¡i lÃ½ thuyáº¿t trÃªn báº±ng Functional Programming nhÆ°ng mÃ  tá»± tháº¥y trÃ¬nh chÆ°a Ä‘á»§ Ä‘á»ƒ giáº£i thÃ­ch nÃªn má»›i cÃ³ cÃ¢u chuyá»‡n cÃ¡i há»™p, bÃ n phÃ­m vÃ  cÃ¢y bÃºt á»Ÿ trÃªn</em> ğŸ˜¥</p>\n<p>Quay láº¡i vá»›i code thÃ¬ mÃ¬nh muá»‘n bá» táº¥t cáº£ má»i thá»© tá»« data Ä‘áº¿n logic vÃ o trong <code class=\"language-text\">Observable</code> vÃ  dÃ¹ng cÃ¡c operator mÃ  <code class=\"language-text\">rxjs</code> cung cáº¥p Ä‘á»ƒ thao tÃ¡c trÃªn nhá»¯ng <code class=\"language-text\">Observable</code> Ä‘Ã³. Vá»›i sá»‘ lÆ°á»£ng <code class=\"language-text\">operator</code> cá»±c khá»§ng mÃ  <code class=\"language-text\">rxjs</code> cung cáº¥p thÃ¬ Ä‘iá»u nÃ y vÃ´ cÃ¹ng kháº£ thi. VÃ­ dá»¥ trÃªn lÃ  cá»™ng 2 sá»‘ trong tháº¿ giá»›i cá»§a <code class=\"language-text\">Observable</code> Ä‘Ã³.</p>\n<h4>Má»™t sá»‘ vÃ­ dá»¥ Ä‘á»ƒ lÃ m quen</h4>\n<p><code class=\"language-text\">Reactive Programming</code> hay háº¹p hÆ¡n lÃ  <code class=\"language-text\">rxjs</code> khÃ´ng pháº£i quÃ¡ khÃ³ Ä‘á»ƒ dÃ¹ng, má»i thá»© báº¡n lÃ m Ä‘Æ°á»£c vá»›i cÃ¡ch code thÃ´ng thÆ°á»ng báº¡n Ä‘á»u cÃ³ thá»ƒ lÃ m Ä‘Æ°á»£c Ä‘iá»u tÆ°Æ¡ng tá»± vá»›i cÃ¡c operator cá»§a <code class=\"language-text\">rxjs</code>. Pháº§n nÃ y mÃ¬nh sáº½ Ä‘Æ°a ra má»™t sá»‘ vÃ­ dá»¥ Ä‘á»ƒ nhá»¯ng ai má»›i biáº¿t Ä‘áº¿n <code class=\"language-text\">rxjs</code> cÃ³ thá»ƒ lÃ m quen vá»›i cÃ¡ch suy nghÄ© <strong>Everything is stream</strong> nhÃ©.</p>\n<p><em>Äá»ƒ dá»… hiá»ƒu thÃ¬ cÃ¡c mÃ¬nh sáº½ dÃ¹ng <code class=\"language-text\">BehaviorSubject</code> Ä‘á»ƒ táº¡o cÃ¡c local stream, trong thá»±c tháº¿ báº¡n cÃ³ thá»ƒ táº¡o ra má»™t <code class=\"language-text\">Observable</code> tá»« báº¥t cá»© thá»© gÃ¬.</em></p>\n<p><strong>Filter má»™t máº£ng theo Ä‘iá»u kiá»‡n</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">NumberType</span> <span class=\"token operator\">=</span> <span class=\"token string\">'ODD'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'EVEN'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> selectedNumberType$ <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BehaviorSubject<span class=\"token operator\">&lt;</span>NumberType<span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'ODD'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> numbers$ <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BehaviorSubject<span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> filteredNumbersA$ <span class=\"token operator\">=</span> <span class=\"token function\">combineLatest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n  numbers$<span class=\"token punctuation\">,</span>\n  selectedNumberType$<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">map</span><span class=\"token punctuation\">(</span>numberType <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n      value <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span>numberType <span class=\"token operator\">===</span> <span class=\"token string\">'ODD'</span> <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>numbers<span class=\"token punctuation\">,</span> filterFn<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>filterFn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Náº¿u báº¡n muá»‘n káº¿t quáº£ chá»‰ thay Ä‘á»•i khi loáº¡i sá»‘ Ä‘Æ°á»£c chá»n thay Ä‘á»•i.</span>\n<span class=\"token keyword\">const</span> filteredNumbersB$ <span class=\"token operator\">=</span> selectedNumberType$<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function\">map</span><span class=\"token punctuation\">(</span>numberType <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    value <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span>numberType <span class=\"token operator\">===</span> <span class=\"token string\">'ODD'</span> <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">withLatestFrom</span><span class=\"token punctuation\">(</span>numbers$<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>filterFn<span class=\"token punctuation\">,</span> numbers<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> numbers<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>filterFn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// [1, 3]</span>\n<span class=\"token comment\">// [2, 4]</span>\n<span class=\"token comment\">// [2]</span>\n<span class=\"token comment\">// [1]</span>\nfilteredNumbersA$<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// [1, 3]</span>\n<span class=\"token comment\">// [2, 4]</span>\n<span class=\"token comment\">// [1]</span>\nfilteredNumbersB$<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nselectedNumberType$<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token string\">'EVEN'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nnumbers$<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nselectedNumberType$<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ODD'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Trong vÃ­ dá»¥ trÃªn mÃ¬nh Ä‘Ã£ láº¥y ra cÃ¡c sá»‘ cháºµn hoáº·c láº½ tuá»³ theo <code class=\"language-text\">selectedNumberType</code> Ä‘ang lÃ  <code class=\"language-text\">EVEN</code> hay <code class=\"language-text\">ODD</code>. Cá»¥ thá»ƒ lÃ  cÃ¡c giÃ¡ trá»‹ Ä‘Æ°á»£c emit tá»« <code class=\"language-text\">selectedNumberType$</code> sáº½ Ä‘Æ°á»£c map thÃ nh má»™t <code class=\"language-text\">function</code> dÃ¹ng Ä‘á»ƒ láº¥y sá»‘ cháº³n hay láº» Ä‘á»ƒ sá»­ dá»¥ng trong method <code class=\"language-text\">filter</code> cá»§a array. BÃ¢y giá» báº¡n hÃ£y suy nghÄ© cÃ¡ch Ä‘á»ƒ lÃ m Ä‘iá»u tÆ°Æ¡ng tá»± nhÆ° <code class=\"language-text\">filteredNumbersA$</code> (káº¿t quáº£ filter Ä‘Æ°á»£c thay Ä‘á»•i má»—i khi máº£ng number vÃ  Ä‘iá»u kiá»‡n filter thay Ä‘á»•i) vÃ   <code class=\"language-text\">filteredNumbersB$</code> (káº¿t quáº£ filter Ä‘Æ°á»£c thay Ä‘á»•i chá»‰ khi Ä‘iá»u kiá»‡n filter thay Ä‘á»•i) xem cÃ³ Ä‘Æ¡n giáº£n khÃ´ng nhÃ©.</p>\n<p>Náº¿u nhÆ° code bÃ¬nh thÆ°á»ng báº¡n lÃ m Ä‘Æ°á»£c káº¿t quáº£ tÆ°Æ¡ng tá»± má»™t cÃ¡ch Ä‘Æ¡n giáº£n trÃªn náº¿u cháº³ng cáº§n quan tÃ¢m pháº£i update láº¡i káº¿t quáº£ náº¿u nhÆ° cÃ¡c biáº¿n sá»‘ cá»§a báº¡n thay Ä‘á»•i. Tuy nhiÃªn khi sá»± thay Ä‘á»•i trá»Ÿ nÃªn cáº§n thiáº¿t báº¡n váº«n sáº½ lÃ m Ä‘Æ°á»£c thÃ´i nhÆ°ng mÃ  ráº¥t cÃ³ thá»ƒ lÃ  nÃ³ sáº½ vÃ´ cÃ¹ng phá»©c táº¡p vÃ  khÃ´ng ai hiá»ƒu ná»•i ngoÃ i báº¡n (mÃ¬nh Ä‘ang nghÄ© tá»›i viá»‡c táº¡o má»™t class vá»›i vÃ i cÃ¡i setter chá»© thiá»‡t báº£n thÃ¢n mÃ¬nh cÅ©ng cháº£ biáº¿t pháº£i code sao cho hay Ä‘á»ƒ lÃ m chuyá»‡n tÆ°Æ¡ng tá»±).</p>\n<p><strong>Toogle</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> buttonClick$ <span class=\"token operator\">=</span> <span class=\"token function\">fromEvent</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> isShow$ <span class=\"token operator\">=</span> buttonClick$<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function\">scan</span><span class=\"token punctuation\">(</span>acc <span class=\"token operator\">=></span> <span class=\"token operator\">!</span>acc<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nisShow$<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// click -> true</span>\n<span class=\"token comment\">// click -> false</span>\n<span class=\"token comment\">// click -> true</span>\n<span class=\"token comment\">// click -> false</span></code></pre></div>\n<p><strong>Autocomplete with a list of items</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchAnimals</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">of</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'dog'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'cat'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'mouse'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'frog'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchFruits</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">of</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'banana'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'durian'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'apple'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'pineapple'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> searchTerm$ <span class=\"token operator\">=</span> <span class=\"token function\">fromEvent</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'change'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> itemType$ <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Subject<span class=\"token operator\">&lt;</span><span class=\"token string\">'ANIMAL'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'FRUIT'</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">makeFilteredItems</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  term$<span class=\"token operator\">:</span> Observable<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n  items$<span class=\"token operator\">:</span> Observable<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> items$<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function\">switchMap</span><span class=\"token punctuation\">(</span>items <span class=\"token operator\">=></span> term$<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">map</span><span class=\"token punctuation\">(</span>term <span class=\"token operator\">=></span> items<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>item <span class=\"token operator\">=></span> item<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>term<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Má»—i khi item type thay Ä‘á»•i thÃ¬ sau 2s sáº½ táº¡o ra array cÃ¡c item </span>\n<span class=\"token comment\">// array nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c filter theo giÃ¡ trá»‹ Ä‘Æ°á»£c nháº­p vÃ o input</span>\n<span class=\"token comment\">// Náº¿u nháº­p input trÆ°á»›c 2s sáº½ khÃ´ng tÃ­nh</span>\n<span class=\"token comment\">// khi Ä‘á»•i type thÃ¬ sáº½ filter láº¡i tá»« Ä‘Ã¢u (input khÃ´ng bá»‹ xoÃ¡ chá»‰ lÃ  khÃ´ng cÃ³ hiá»‡u lá»±c thÃ´i)</span>\n<span class=\"token keyword\">const</span> result$ <span class=\"token operator\">=</span> itemType$<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function\">switchMap</span><span class=\"token punctuation\">(</span>itemType <span class=\"token operator\">=></span> <span class=\"token function\">makeFilteredItems</span><span class=\"token punctuation\">(</span>\n    searchTerm$<span class=\"token punctuation\">,</span>\n    itemType <span class=\"token operator\">===</span> <span class=\"token string\">'ANIMAL'</span> <span class=\"token operator\">?</span> <span class=\"token function\">fetchAnimals</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">fetchFruits</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// --*-- ANIMAL --*--</span>\n<span class=\"token comment\">// ['dog', 'cat', 'mouse', 'frog']</span>\n<span class=\"token comment\">// ['dog', 'mouse', 'frog']</span>\n<span class=\"token comment\">// ['dog', 'frog']</span>\n<span class=\"token comment\">// ['dog', 'mouse', 'frog']</span>\n<span class=\"token comment\">// ['cat']</span>\n\n<span class=\"token comment\">// --*-- FRUIT --*--</span>\n<span class=\"token comment\">// ['banana', 'durian', 'apple', 'pineapple'] (t)</span>\n<span class=\"token comment\">// ['banana', 'durian', 'apple', 'pineapple'] ( )</span>\n<span class=\"token comment\">// ['apple', 'pineapple'] (ap)</span>\n<span class=\"token comment\">// ['banana', 'durian', 'apple', 'pineapple'] (a)</span>\n<span class=\"token comment\">// ['banana', 'durian', 'apple', 'pineapple'] ( )</span>\n<span class=\"token comment\">// ['banana', 'durian', 'apple', 'pineapple'] (a)</span>\n<span class=\"token comment\">// ['banana' 'durian'] (an)</span>\nresult$<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nitemType$<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ANIMAL'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// input: (sau 2s) o---og---o---t</span>\nitemType$<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token string\">'FRUIT'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// input (Ä‘ang lÃ  t tá»« láº§n nháº­p trÆ°á»›c): sau (2s) -- --ap--a-- --a--an</span></code></pre></div>\n<p>TrÃªn Ä‘Ã¢y lÃ  má»™t sá»‘ vÃ­ dá»¥ sá»­ dá»¥ng <code class=\"language-text\">rxjs</code> Ä‘á»ƒ thá»±c hiá»‡n má»™t sá»‘ viá»‡c, vá» cÆ¡ báº£n báº¥t cá»© thá»© gÃ¬ báº¡n cÅ©ng cÃ³ thá»ƒ nhÃ©t nÃ³ vÃ o trong 1 <code class=\"language-text\">Observable</code> vÃ  náº¿u táº¥t cáº£ má»i thá»© Ä‘á»u lÃ  <code class=\"language-text\">Observable</code> thÃ¬ táº¥t cáº£ nhá»¯ng logic, nhá»¯ng tÃ­nh toÃ¡n mÃ  báº¡n thá»±c hiá»‡n háº±ng ngÃ y Ä‘á»u sáº½ lÃ  sá»± káº¿t há»£p cá»§a cÃ¡c observable vÃ  cÃ¡c operator.</p>\n<h4>Angular First Class Observable</h4>\n<p>Náº¿u nhÆ° báº¡n cÃ³ thá»ƒ thay Ä‘á»•i mindset theo hÆ°á»›ng <code class=\"language-text\">Reactive Programming</code>, biáº¿n Ä‘á»•i táº¥t cáº£ má»i thá»© cÃ³ trong má»™t component thÃ nh dáº¡ng <code class=\"language-text\">Observable</code> thÃ¬ Ä‘Ã³ chÃ­nh lÃ  pattern mÃ  mÃ­nh gá»i lÃ  <code class=\"language-text\">Angular First Class Observable</code>. Nghe cÃ³ váº» mÆ¡ há»“ nÃªn mÃ¬nh sáº½ Ä‘Æ°a ra má»™t sá»‘ nguyÃªn táº¯c sau:</p>\n<ul>\n<li>Táº¥t cáº£ cÃ¡c property Ä‘á»u pháº£i lÃ  <code class=\"language-text\">Observable</code>.</li>\n<li>Sá»­ dá»¥ng <code class=\"language-text\">BehaviorSubject</code> cho cÃ¡c state cá»§a component.</li>\n<li>Náº¿u cáº§n handle má»™t event tá»« template, Ä‘á»«ng táº¡o handler method hÃ£y dÃ¹ng <code class=\"language-text\">Subject</code> Ä‘á»ƒ thá»ƒ hiá»ƒn má»™t stream cÃ¡c event cáº§n handle vÃ  subscribe vÃ o subject Ä‘Ã³.</li>\n<li>Chuyá»ƒn táº¥t cáº£ <code class=\"language-text\">@Input</code> vá» dáº¡ng <code class=\"language-text\">Observable</code>.</li>\n</ul>\n<p>Äá»ƒ Ä‘Æ¡n giáº£n thÃ¬ mÃ¬nh hÃ£y xem qua vÃ­ dá»¥ nÃ y nhÃ©.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  selector<span class=\"token operator\">:</span> <span class=\"token string\">'app-counter'</span><span class=\"token punctuation\">,</span>\n  template<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    &lt;div>{{ $count | async }}&lt;div>\n    &lt;button (click)=\"upBtnClick$.next()\">UP&lt;/button>\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CounterComponent</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OnInit</span><span class=\"token punctuation\">,</span> OnDestroy <span class=\"token punctuation\">{</span>\n  @<span class=\"token function\">Input</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">get</span> <span class=\"token function\">startValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_startValue$<span class=\"token punctuation\">.</span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">set</span> <span class=\"token function\">startValue</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_startValue$<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  count$<span class=\"token operator\">:</span> Observable<span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  upBtnClick$ <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Subject<span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">private</span> _startValue$ <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ReplaySubject<span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> _step$ <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BehaviorSubject<span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> _unsubscribe$ <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Subject<span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token function-variable function\">_initData</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count$ <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_startValue$<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>\n      <span class=\"token function\">switchMap</span><span class=\"token punctuation\">(</span>startValue <span class=\"token operator\">=></span> <span class=\"token function\">interval</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>\n        <span class=\"token function\">withLatest</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_step$<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>value<span class=\"token punctuation\">,</span> step<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> value <span class=\"token operator\">*</span> step <span class=\"token operator\">+</span> startValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token function-variable function\">_initEffect</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_upBtnClickEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">ngOnInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_initData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">_initEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">ngOnDestroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_unsubscribe$<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_unsubscribe$<span class=\"token punctuation\">.</span><span class=\"token function\">complete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token function-variable function\">_upBtnClickEffect</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>upBtnClick$<span class=\"token punctuation\">.</span><span class=\"token function\">pipe</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">withLatestFrom</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_step$<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">tap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> step<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_step$<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span>step <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">takeUntil</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_unsubscribe$<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Component Counter trong vÃ­ dá»¥ trÃªn sáº½ hiá»‡n má»™t sá»‘ tÄƒng liÃªn tá»¥c tá»« <code class=\"language-text\">startValue</code> Ä‘Æ°á»£c truyá»n tá»« input, má»—i láº§n <code class=\"language-text\">startValue</code> thay Ä‘á»•i nÃ³ sáº½ Ä‘áº¿m láº¡i tá»« giÃ¡ trá»‹ <code class=\"language-text\">startValue</code> má»›i Ä‘Ã³. Náº¿u click vÃ o nÃºt <code class=\"language-text\">UP</code> thÃ¬ giÃ¡ trá»‹ Ä‘áº¿m tÄƒng lÃªn má»—i giÃ¢y sáº½ thÃªm 1. Báº¡n cÃ³ thá»ƒ tháº¥y ráº±ng táº¥t cáº£ má»i thá»© mÃ¬nh sá»­ dá»¥ng Ä‘á»u lÃ  <code class=\"language-text\">Observable</code>:</p>\n<ul>\n<li><code class=\"language-text\">input starValue</code> Ä‘Ã£ bá»‹ Ä‘á»•i thÃ nh <code class=\"language-text\">_startValue$</code> báº±ng getter vÃ  setter.</li>\n<li>GiÃ¡ trá»‹ Ä‘áº¿m hiá»ƒn thá»‹ trÃªn UI vÃ  logic Ä‘á»ƒ tÄƒng giÃ¡ trá»‹ Ä‘Ã³ lÃªn sau má»—i giÃ¢y sáº½ Ä‘Æ°á»£c thá»ƒ hiá»‡n qua <code class=\"language-text\">count$</code>.</li>\n<li>Xá»­ lÃ½ event click cÅ©ng Ä‘Æ°á»£c thá»±c hiá»‡n thÃ´ng qua <code class=\"language-text\">upBtnClick</code>.</li>\n<li>DÃ¹ng <code class=\"language-text\">_step$</code> Ä‘á»ƒ lÆ°u láº¡i state.</li>\n<li>Logic update láº¡i state má»—i khi click cÅ©ng lÃ  má»™t observable vÃ  Ä‘Æ°á»£c táº¡o ra tá»« <code class=\"language-text\">_upBtnClickEffect()</code>.</li>\n</ul>\n<p>ÄÆ¡n giáº£n tháº¿ thÃ´i, háº§u nhÆ° má»i thá»© Ä‘á»u cÃ³ thá»ƒ Ä‘Æ°á»£c xá»­ lÃ½ dÆ°á»›i dáº¡ng <code class=\"language-text\">Observable</code>, lÃºc Ä‘Ã³ chÃºng ta cÃ³ thá»ƒ táº­n dá»¥ng sá»©c máº¡nh mÃ  <code class=\"language-text\">Observable</code> mang láº¡i Ä‘á»ƒ thá»±c hiá»‡n nhá»¯ng logic vÃ´ cÃ¹ng phá»©c táº¡p nhÆ°ng code theo phong cÃ¡ch declarative ráº¥t dá»… hiá»ƒu.</p>\n<p>NÃ³i dÃ´ng dÃ i thÃ¬ <code class=\"language-text\">Angular First Class Observable</code>, vÃ­ dá»¥ trÃªn cÃ³ láº½ lÃ  Ä‘á»§ Ä‘á»ƒ cÃ¡c báº¡n cÃ³ Ä‘Æ°á»£c Ã½ tÆ°á»Ÿng Ä‘á»ƒ chuyá»ƒn má»i thá»© trong má»™t component thÃ nh <code class=\"language-text\">Observable</code>. Tuy nhiÃªn cháº¯c nhiá»u báº¡n sáº½ tháº¥y ráº±ng quÃ¡ nhiá»u boilerplate code. ChÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng <code class=\"language-text\">decorator</code> cáº£i thiá»‡n viá»‡c nÃ y.</p>\n<h4>ObservableBinding Decorator</h4>\n<p>Trong vÃ­ dá»¥ thÃ¬ <code class=\"language-text\">Input</code> nÃ o cÃ¡c báº¡n cÅ©ng cÃ³ thá»ƒ dÃ¹ng cÃ¡ch nÃ y Ä‘á»ƒ thá»±c hiá»‡n chuyá»ƒn thÃ nh observable. Váº­y Ä‘á»ƒ Ä‘á»¡ pháº£i code láº·p Ä‘i láº·p láº¡i thÃ¬ hÃ£y táº¡o má»™t decorator cho viá»‡c nÃ y.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ReplaySubject <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'rxjs'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token generic-function\"><span class=\"token function\">ObservableBinding</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">K</span> <span class=\"token operator\">=</span> <span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>map<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">K</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token builtin\">symbol</span> <span class=\"token operator\">=</span> <span class=\"token function\">Symbol</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> subjectSymbol <span class=\"token operator\">=</span> <span class=\"token function\">Symbol</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>target<span class=\"token operator\">:</span> object<span class=\"token punctuation\">,</span> key<span class=\"token operator\">:</span> PropertyKey<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Object<span class=\"token punctuation\">.</span><span class=\"token function\">definedProperty</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function-variable function\">set</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>subjectSymbol<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>subjectSymbol<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ReplaySubject<span class=\"token operator\">&lt;</span><span class=\"token constant\">K</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">symbol</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>subjectSymbol<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">asObservable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">[</span>subjectSymbol<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span>map <span class=\"token operator\">?</span> <span class=\"token function\">map</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">get</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>subjectSymbol<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>subjectSymbol<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ReplaySubject<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">symbol</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>subjectSymbol<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">asObservable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">symbol</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Sau Ä‘Ã³ thay vÃ¬ Ä‘á»‘ng get, set trÃªn thÃ¬ chá»‰ cáº§n</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">@<span class=\"token function\">ObservableBinding</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n@<span class=\"token function\">Input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'url'</span><span class=\"token punctuation\">)</span> url$<span class=\"token operator\">:</span> Observable<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n@<span class=\"token function\">ObservableBiding</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> value <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n@<span class=\"token function\">Input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'count'</span><span class=\"token punctuation\">)</span> count$<span class=\"token operator\">:</span> Observable<span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>CÆ¡ báº£n Ã½ tÆ°á»Ÿng chá»‰ cÃ³ váº­y, náº¿u báº¡n thÃ­ch <code class=\"language-text\">rxjs</code> nhÆ° mÃ¬nh vÃ  thÃ­ch dÃ¹ng nÃ³ nhiá»u nháº¥t cÃ³ thá»ƒ thÃ¬ Ä‘Ã¢y lÃ  má»™t hÆ°á»›ng Ä‘i mÃ  báº¡n cÃ³ thá»ƒ cÃ¢n nháº¯c. Náº¿u <code class=\"language-text\">rxjs</code> lÃ  lÃ½ do báº¡n code Angular nhÆ° mÃ¬nh thÃ¬ cÃ²n chá» gÃ¬ ná»¯a mÃ  khÃ´ng lÃªn github cho <code class=\"language-text\">rxjs</code> má»™t star sáºµn tiá»‡n unstar Angular luÃ´n ğŸ˜¬</p>\n<h4>Hy vá»ng báº¡n tháº¥y bÃ i viáº¿t nÃ y bá»• Ã­ch ğŸ’•</h4>","frontmatter":{"path":"/first-class-observable-angular","title":"Má»™t chÃºt ngáº«u há»©ng vá»›i Angular - First Class Observable Pattern","featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABnElEQVQY02NYpNTNOEe5i+GjSK/CKene1XuleuedEOq2PyjSw2AimsfQrtDOkKHVzpAJxNnaXQyZ2h2MmVodYLE0zRYGEBsoBuS3MXzr/c/A8J+7n+E/+wSeqSrdl5cq9fw/Idrz/yFv7/+r/D09/9kmMPxnmM0IVMwOxJw5Ot1gzVADmZI1GkEWcQAxV7pmG0OscjUDw2z5Lob1Ml1u0xW7/09W7Zm5UbxT5Q1Xb+E2se56O4NWHTeDNqAhnWZAg5yAWByIxYAGsmVpdwgADZUE8s2BWCMNaCDI1QwHxbsZDkt0W14U7Pl/n6fH6AZ/D8NGyW6GGP2OuDStjvQcoGuytDtNgZqsgFgIiL2BWBqIVaEGKoINhbiUgeE8Xy/jFcFehreCfete8PUefsfao7lHsscJGAR3KrQ69aq0uhgKtLtAipkyQJq0O/igtDzQpaxAWgKIJbOBwVGgN5GB4aNoH+MPiX6Gh5p9HG9E+ha/4e39ckmw59ZauZ5cIM3wmb2XMV6vmwEURiAXQMKwHR6WYBqIUzWbgGpaGQBOoaiqG48iQAAAAABJRU5ErkJggg==","aspectRatio":3.3333333333333335,"src":"/next-blog/static/c74ac8947b9e5dc496e8909256ceb548/05d05/rxjs-featured.png","srcSet":"/next-blog/static/c74ac8947b9e5dc496e8909256ceb548/5ca18/rxjs-featured.png 270w,\n/next-blog/static/c74ac8947b9e5dc496e8909256ceb548/13528/rxjs-featured.png 540w,\n/next-blog/static/c74ac8947b9e5dc496e8909256ceb548/05d05/rxjs-featured.png 1080w,\n/next-blog/static/c74ac8947b9e5dc496e8909256ceb548/ba0d8/rxjs-featured.png 1620w,\n/next-blog/static/c74ac8947b9e5dc496e8909256ceb548/85b69/rxjs-featured.png 1838w","sizes":"(max-width: 1080px) 100vw, 1080px"}}},"date":"2020-08-06","tags":"TYPESCRIPT,RXJS,ANGULAR","duration":10}}},"pageContext":{"mdpath":"/first-class-observable-angular","language":"en","intl":{"language":"en","languages":["en","vi"],"messages":{"home.greeting":"Hello, I'm Hai Dinh Nguyen","home.intro":"I'm a Software Engineer. I mostly do front-end development. I can work well with React and Angular, also a big fan of Functional Programming and Reactive Programming."},"routed":false,"originalPath":"/first-class-observable-angular","redirect":true,"defaultLanguage":"en"}}},"staticQueryHashes":["4033596395"]}